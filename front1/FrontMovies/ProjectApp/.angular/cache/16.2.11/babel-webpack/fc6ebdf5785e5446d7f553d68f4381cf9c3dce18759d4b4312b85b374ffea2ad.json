{"ast":null,"code":"import { MatChipsModule } from '@angular/material/chips';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatListModule } from '@angular/material/list';\nimport { CommonModule } from '@angular/common';\nimport { LayoutModule } from \"../../layout/layout.module\";\nimport { ReservationComponent } from \"../../reservation/reservation.component\";\nimport { RoleEnum } from 'src/app/models/userEnums.model';\nimport { MatTableDataSource, MatTableModule } from '@angular/material/table';\nimport { MatSort } from '@angular/material/sort';\nimport { MatPaginator, MatPaginatorModule } from '@angular/material/paginator';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../accommodation.service\";\nimport * as i3 from \"src/app/auth/auth.service\";\nimport * as i4 from \"src/app/rating/review.service\";\nimport * as i5 from \"src/app/user.service\";\nimport * as i6 from \"@angular/material/snack-bar\";\nimport * as i7 from \"@angular/material/paginator\";\nimport * as i8 from \"@angular/material/icon\";\nimport * as i9 from \"@angular/material/table\";\nimport * as i10 from \"@angular/common\";\nimport * as i11 from \"../../layout/map/map.component\";\nfunction AccommodationDetailsComponent_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function AccommodationDetailsComponent_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.removeFromFavourites());\n    });\n    i0.ɵɵtext(1, \" Remove from favourites \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AccommodationDetailsComponent_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function AccommodationDetailsComponent_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r24.addToFavourites());\n    });\n    i0.ɵɵtext(1, \" Add to favourites \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AccommodationDetailsComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"img\", 28);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"alt\", \"\", ctx_r2.accommodation == null ? null : ctx_r2.accommodation.name, \" Image\");\n    i0.ɵɵproperty(\"src\", ctx_r2.accommodation.images[0], i0.ɵɵsanitizeUrl);\n  }\n}\nfunction AccommodationDetailsComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 29);\n  }\n}\nfunction AccommodationDetailsComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const asset_r26 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(asset_r26);\n  }\n}\nfunction AccommodationDetailsComponent_div_44_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 33);\n  }\n  if (rf & 2) {\n    const image_r28 = ctx.$implicit;\n    const i_r29 = ctx.index;\n    const ctx_r27 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleProp(\"background-image\", \"url(\" + image_r28 + \")\");\n    i0.ɵɵattribute(\"alt\", (ctx_r27.accommodation == null ? null : ctx_r27.accommodation.name) + \" Image \" + (i_r29 + 1));\n  }\n}\nfunction AccommodationDetailsComponent_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵtemplate(1, AccommodationDetailsComponent_div_44_div_1_Template, 1, 3, \"div\", 32);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.accommodation.images.slice(1));\n  }\n}\nfunction AccommodationDetailsComponent_div_52_button_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function AccommodationDetailsComponent_div_52_button_23_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const review_r30 = i0.ɵɵnextContext().$implicit;\n      const ctx_r32 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r32.deleteReview(review_r30.id));\n    });\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AccommodationDetailsComponent_div_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 34)(2, \"p\")(3, \"strong\");\n    i0.ɵɵtext(4, \"User ID:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\")(7, \"strong\");\n    i0.ɵɵtext(8, \"Reviewing \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\")(11, \"strong\");\n    i0.ɵɵtext(12, \"Comment:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\")(15, \"strong\");\n    i0.ɵɵtext(16, \"Grade:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"p\")(19, \"strong\");\n    i0.ɵɵtext(20, \"Date:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21);\n    i0.ɵɵpipe(22, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(23, AccommodationDetailsComponent_div_52_button_23_Template, 2, 0, \"button\", 35);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const review_r30 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", review_r30.userId, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", review_r30.type, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", review_r30.comment, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", review_r30.grade, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(22, 6, review_r30.dateTime, \"medium\"), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (review_r30 == null ? null : review_r30.userId) == ctx_r7.loggedInUserId);\n  }\n}\nfunction AccommodationDetailsComponent_div_56_button_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r39 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function AccommodationDetailsComponent_div_56_button_23_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r39);\n      const review_r35 = i0.ɵɵnextContext().$implicit;\n      const ctx_r37 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r37.deleteReview(review_r35.id));\n    });\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AccommodationDetailsComponent_div_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 34)(2, \"p\")(3, \"strong\");\n    i0.ɵɵtext(4, \"User ID:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\")(7, \"strong\");\n    i0.ɵɵtext(8, \"Reviewing \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\")(11, \"strong\");\n    i0.ɵɵtext(12, \"Comment:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\")(15, \"strong\");\n    i0.ɵɵtext(16, \"Grade:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"p\")(19, \"strong\");\n    i0.ɵɵtext(20, \"Date:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21);\n    i0.ɵɵpipe(22, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(23, AccommodationDetailsComponent_div_56_button_23_Template, 2, 0, \"button\", 35);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const review_r35 = ctx.$implicit;\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", review_r35.userId, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", review_r35.type, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", review_r35.comment, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", review_r35.grade, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(22, 6, review_r35.dateTime, \"medium\"), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (review_r35 == null ? null : review_r35.userId) == ctx_r8.loggedInUserId);\n  }\n}\nfunction AccommodationDetailsComponent_th_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 37);\n    i0.ɵɵtext(1, \" Id \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AccommodationDetailsComponent_td_63_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r40 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r40.id, \" \");\n  }\n}\nfunction AccommodationDetailsComponent_th_65_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 39);\n    i0.ɵɵtext(1, \" Start Date\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AccommodationDetailsComponent_td_66_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r41 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, element_r41.timeSlot.startDate, \"shortDate\"), \" \");\n  }\n}\nfunction AccommodationDetailsComponent_th_68_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 39);\n    i0.ɵɵtext(1, \" End Date \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AccommodationDetailsComponent_td_69_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r42 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, element_r42.timeSlot.endDate, \"shortDate\"), \"\");\n  }\n}\nfunction AccommodationDetailsComponent_th_71_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 37);\n    i0.ɵɵtext(1, \" Price \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AccommodationDetailsComponent_td_72_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r43 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r43.price, \" \");\n  }\n}\nfunction AccommodationDetailsComponent_th_74_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 37);\n    i0.ɵɵtext(1, \"Type \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AccommodationDetailsComponent_td_75_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r44 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r44.type, \" \");\n  }\n}\nfunction AccommodationDetailsComponent_tr_76_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 40);\n  }\n}\nfunction AccommodationDetailsComponent_tr_77_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 41);\n  }\n}\nfunction AccommodationDetailsComponent_app_reservation_80_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-reservation\");\n  }\n}\nconst _c0 = function () {\n  return [5, 10, 20];\n};\nexport class AccommodationDetailsComponent {\n  constructor(route, router, accommodationService, authService, reviewService, cdr, userService, snackBar) {\n    this.route = route;\n    this.router = router;\n    this.accommodationService = accommodationService;\n    this.authService = authService;\n    this.reviewService = reviewService;\n    this.cdr = cdr;\n    this.userService = userService;\n    this.snackBar = snackBar;\n    this.averageGradeOwner = 0.00;\n    this.averageGradeAccommodation = 0.00;\n    this.accessToken = localStorage.getItem('user');\n    this.helper = new JwtHelperService();\n    this.decodedToken = this.helper.decodeToken(this.accessToken);\n    this.availableDates = [];\n    this.dataSource = new MatTableDataSource([]);\n    this.displayedColumns = ['Id', 'Start Date', 'End Date', 'Price', 'Type'];\n  }\n  ngAfterViewInit() {\n    this.cdr.detectChanges();\n  }\n  openSnackBar(message) {\n    this.snackBar.open(message, 'OK', {\n      duration: 4000\n    });\n  }\n  ngOnInit() {\n    this.averageGradeAccommodation = 0.00;\n    this.averageGradeOwner = 0.00;\n    if (this.decodedToken) {\n      this.loggedInUserId = this.decodedToken.sub;\n      this.authService.userState.subscribe(result => {\n        if (result != null) {\n          this.role = result.role;\n          console.log(this.loggedInUserId);\n          this.userService.getUserById(this.loggedInUserId).subscribe(foundUser => {\n            if (foundUser) {\n              this.wholeUser = foundUser;\n            }\n          });\n        } else {\n          this.role = RoleEnum.UNAUTHENTICATED;\n        }\n        this.cdr.detectChanges();\n      });\n    }\n    this.route.paramMap.subscribe(params => {\n      const accommodationId = +params.get('id');\n      this.averageGradeAccommodation = this.calculateAverageGradeAccommodation(accommodationId);\n      console.log(this.averageGradeAccommodation);\n      this.accommodationService.getById(accommodationId).subscribe(foundAccommodation => {\n        if (foundAccommodation) {\n          this.accommodation = foundAccommodation;\n          this.averageGradeOwner = this.calculateAverageGradeOwner(foundAccommodation.ownerId);\n          console.log(this.accommodation);\n          this.dataSource = new MatTableDataSource(this.accommodation.prices);\n          this.dataSource.paginator = this.paginator;\n          this.dataSource.sort = this.sort;\n          this.fetchAccommodationReviews(accommodationId);\n          this.fetchOwnerReviews(this.accommodation.ownerId);\n        } else {\n          console.error(`Accommodation with ID ${accommodationId} not found`);\n        }\n      }, error => {\n        console.error('Error fetching accommodation:', error);\n      });\n    });\n  }\n  isInGuestFavourites(accommodationId) {\n    const guestFavourites = this.wholeUser.favouriteAccommodations.split(\",\");\n    const accommodationIdString = accommodationId.toString();\n    return guestFavourites.includes(accommodationIdString);\n  }\n  addToFavourites() {\n    if (this.accommodation?.id) this.userService.addFavourite(this.wholeUser.username, this.accommodation.id).subscribe(() => {\n      this.openSnackBar(\"Added to favourites\");\n      this.ngOnInit();\n    }, error => {\n      console.error('Failed to add to favourites', error);\n    });\n  }\n  removeFromFavourites() {\n    if (this.accommodation?.id) this.userService.removeFavourite(this.wholeUser.username, this.accommodation.id).subscribe(() => {\n      this.openSnackBar(\"Removed from favourites\");\n      this.ngOnInit();\n    }, error => {\n      console.error('Failed to remove from favourites', error);\n    });\n  }\n  fetchAccommodationReviews(accommodationId) {\n    this.reviewService.findByAccommodationId(accommodationId).subscribe(reviews => {\n      const approvedReviews = [];\n      for (const review of reviews) {\n        if (review.status.toString() == \"APPROVED\") {\n          approvedReviews.push(review);\n          //  this.calculateAverageGradeAccommodation(review.accommodationId)\n        }\n      }\n\n      this.accommodationReviews = approvedReviews;\n      console.log(approvedReviews);\n      console.log('Accommodation reviews:', this.accommodationReviews);\n    }, error => {\n      console.error('Error fetching reviews:', error);\n    });\n  }\n  fetchOwnerReviews(ownerId) {\n    this.reviewService.findByOwnerId(ownerId).subscribe(reviews => {\n      const approvedReviews = [];\n      for (const review of reviews) {\n        if (review.status.toString() == \"APPROVED\") {\n          approvedReviews.push(review);\n        }\n      }\n      this.ownerReviews = approvedReviews;\n      console.log('Owner reviews:', this.ownerReviews);\n      console.log(approvedReviews);\n    }, error => {\n      console.error('Error fetching reviews:', error);\n    });\n  }\n  goBack() {\n    this.router.navigate(['/home']);\n  }\n  // Add a getter to explicitly check for non-null images\n  get accommodationImages() {\n    return this.accommodation?.images;\n  }\n  isDateAvailable(date) {\n    return this.availableDates.some(availableDate => this.isSameDate(date, availableDate));\n  }\n  isSameDate(date1, date2) {\n    return date1.getFullYear() === date2.getFullYear() && date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate();\n  }\n  deleteReview(id) {\n    if (id != undefined) {\n      this.reviewService.delete(id).subscribe(() => {\n        console.log(`Review with ID ${id} deleted successfully`);\n        // Optionally, you can fetch the updated reviews after deletion\n        const accommodationId = this.accommodation?.id || 0;\n        this.fetchAccommodationReviews(accommodationId);\n      }, error => {\n        console.error(`Error deleting review with ID ${id}:`, error);\n      });\n    }\n  }\n  calculateAverageGradeAccommodation(accommodationId) {\n    let averageGrade = 0; // ili neka podrazumevana vrednost\n    let sum = 0;\n    this.averageGradeAccommodation = 0.00;\n    this.reviewService.findByAccommodationId(accommodationId).subscribe(reviews => {\n      // Handle the list of reviews here\n      let numberOfReviews = 0;\n      for (const review of reviews) {\n        if (review.status.toString() === \"APPROVED\") {\n          sum = sum + review.grade;\n          numberOfReviews = numberOfReviews + 1;\n        }\n        // Do something with each review\n        // Add more properties or actions as needed\n      }\n\n      console.log(\"num: \", numberOfReviews);\n      averageGrade = sum / numberOfReviews;\n      console.log(\"AVERAGE  GRADE : \", averageGrade);\n      if (numberOfReviews != 0) {\n        this.averageGradeAccommodation = averageGrade;\n      } else {\n        this.averageGradeAccommodation = 0.00;\n      }\n      return averageGrade;\n      // Do further processing or manipulation if needed\n    }, error => {\n      console.error('Error retrieving reviews:', error);\n      // Handle the error as needed\n    });\n\n    return averageGrade;\n    //   this.reviewService.findAverageGradeByAccommodationId(accommodationId).subscribe(\n    //     (grade: number) => {\n    //       averageGrade = grade;\n    //     },\n    //     (error: any) => {\n    //       console.error('Greška pri dobijanju prosečne ocene smestaja:', error);\n    //     }\n    //   );\n    // return averageGrade;\n    // return this.reviewService.findAverageGradeByOwnerId(ownerId);\n  }\n\n  calculateAverageGradeOwner(ownerId) {\n    let averageGrade = 0; // ili neka podrazumevana vrednost\n    let sum = 0;\n    this.averageGradeOwner = 0.00;\n    this.reviewService.findByOwnerId(ownerId).subscribe(reviews => {\n      // Handle the list of reviews here\n      let numberOfReviews = 0;\n      for (const review of reviews) {\n        if (review.status.toString() === \"APPROVED\") {\n          sum = sum + review.grade;\n          numberOfReviews = numberOfReviews + 1;\n        }\n        // Do something with each review\n        // Add more properties or actions as needed\n      }\n\n      console.log(\"num: \", numberOfReviews);\n      averageGrade = sum / numberOfReviews;\n      console.log(\"AVERAGE  GRADE : \", averageGrade);\n      // this.averageGradeOwner=averageGrade;\n      if (numberOfReviews != 0) {\n        this.averageGradeOwner = averageGrade;\n      } else {\n        this.averageGradeOwner = 0.00;\n      }\n      return averageGrade;\n      // Do further processing or manipulation if needed\n    }, error => {\n      console.error('Error retrieving reviews:', error);\n      // Handle the error as needed\n    });\n\n    return averageGrade;\n    // return this.reviewService.findAverageGradeByOwnerId(ownerId);\n  }\n  static #_ = this.ɵfac = function AccommodationDetailsComponent_Factory(t) {\n    return new (t || AccommodationDetailsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AccommodationService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.ReviewService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i5.UserService), i0.ɵɵdirectiveInject(i6.MatSnackBar));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AccommodationDetailsComponent,\n    selectors: [[\"app-accommodation-details\"]],\n    viewQuery: function AccommodationDetailsComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(MatSort, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n      }\n    },\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 81,\n    vars: 30,\n    consts: [[1, \"details-container\"], [1, \"heading\"], [\"class\", \"favourites-button\", 3, \"click\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"noImages\", \"\"], [1, \"content\"], [1, \"options-container\"], [\"class\", \"custom-chip\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"image-container\", 4, \"ngIf\"], [2, \"margin-top\", \"3%\", \"margin-left\", \"80%\", 3, \"click\"], [2, \"padding-left\", \"25px\"], [4, \"ngFor\", \"ngForOf\"], [1, \"mat-elevation-z8\"], [2, \"margin-left\", \"10px\"], [\"mat-table\", \"\", \"matSort\", \"\", 3, \"dataSource\"], [\"matColumnDef\", \"Id\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"Start Date\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"End Date\"], [\"matColumnDef\", \"Price\"], [\"matColumnDef\", \"Type\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"showFirstLastButtons\", \"\", \"aria-label\", \"Select page of periodic elements\", 3, \"pageSizeOptions\"], [4, \"ngIf\"], [1, \"favourites-button\", 3, \"click\"], [3, \"src\", \"alt\"], [\"src\", \"../../../assets/images/accommodation1.jpg\", \"alt\", \"Default Image\"], [1, \"custom-chip\"], [1, \"image-container\"], [\"class\", \"image-thumbnail\", 3, \"backgroundImage\", 4, \"ngFor\", \"ngForOf\"], [1, \"image-thumbnail\"], [1, \"review\"], [\"class\", \"dugme-delete\", 3, \"click\", 4, \"ngIf\"], [1, \"dugme-delete\", 3, \"click\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\"], [\"mat-header-cell\", \"\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function AccommodationDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n        i0.ɵɵtext(3);\n        i0.ɵɵtemplate(4, AccommodationDetailsComponent_button_4_Template, 2, 0, \"button\", 2);\n        i0.ɵɵtemplate(5, AccommodationDetailsComponent_button_5_Template, 2, 0, \"button\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(6, AccommodationDetailsComponent_div_6_Template, 2, 2, \"div\", 3);\n        i0.ɵɵtemplate(7, AccommodationDetailsComponent_ng_template_7_Template, 1, 0, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 5)(10, \"p\")(11, \"strong\");\n        i0.ɵɵtext(12, \"Description:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"p\")(15, \"strong\");\n        i0.ɵɵtext(16, \"Location:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"p\")(19, \"strong\");\n        i0.ɵɵtext(20, \"Guests:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"p\")(23, \"strong\");\n        i0.ɵɵtext(24, \"Status:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"p\")(27, \"strong\");\n        i0.ɵɵtext(28, \"Accommodation average grade: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(29);\n        i0.ɵɵpipe(30, \"number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"p\")(32, \"strong\");\n        i0.ɵɵtext(33, \"Owners Average grade: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(34);\n        i0.ɵɵpipe(35, \"number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"p\")(37, \"strong\");\n        i0.ɵɵtext(38, \"Assets:\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(39, \"div\", 6);\n        i0.ɵɵtemplate(40, AccommodationDetailsComponent_div_40_Template, 2, 1, \"div\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"p\")(42, \"strong\");\n        i0.ɵɵtext(43, \"Additional Images:\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(44, AccommodationDetailsComponent_div_44_Template, 2, 1, \"div\", 8);\n        i0.ɵɵelementStart(45, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function AccommodationDetailsComponent_Template_button_click_45_listener() {\n          return ctx.goBack();\n        });\n        i0.ɵɵelementStart(46, \"mat-icon\");\n        i0.ɵɵtext(47, \"arrow_back\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelement(48, \"br\");\n        i0.ɵɵelementStart(49, \"p\", 10)(50, \"strong\");\n        i0.ɵɵtext(51, \"Accommodation reviews:\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(52, AccommodationDetailsComponent_div_52_Template, 24, 9, \"div\", 11);\n        i0.ɵɵelementStart(53, \"p\", 10)(54, \"strong\");\n        i0.ɵɵtext(55, \"Owner reviews:\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(56, AccommodationDetailsComponent_div_56_Template, 24, 9, \"div\", 11);\n        i0.ɵɵelementStart(57, \"div\", 12)(58, \"h2\", 13);\n        i0.ɵɵtext(59, \"Prices and availability intervals\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(60, \"table\", 14);\n        i0.ɵɵelementContainerStart(61, 15);\n        i0.ɵɵtemplate(62, AccommodationDetailsComponent_th_62_Template, 2, 0, \"th\", 16);\n        i0.ɵɵtemplate(63, AccommodationDetailsComponent_td_63_Template, 2, 1, \"td\", 17);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(64, 18);\n        i0.ɵɵtemplate(65, AccommodationDetailsComponent_th_65_Template, 2, 0, \"th\", 19);\n        i0.ɵɵtemplate(66, AccommodationDetailsComponent_td_66_Template, 3, 4, \"td\", 17);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(67, 20);\n        i0.ɵɵtemplate(68, AccommodationDetailsComponent_th_68_Template, 2, 0, \"th\", 19);\n        i0.ɵɵtemplate(69, AccommodationDetailsComponent_td_69_Template, 3, 4, \"td\", 17);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(70, 21);\n        i0.ɵɵtemplate(71, AccommodationDetailsComponent_th_71_Template, 2, 0, \"th\", 16);\n        i0.ɵɵtemplate(72, AccommodationDetailsComponent_td_72_Template, 2, 1, \"td\", 17);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(73, 22);\n        i0.ɵɵtemplate(74, AccommodationDetailsComponent_th_74_Template, 2, 0, \"th\", 16);\n        i0.ɵɵtemplate(75, AccommodationDetailsComponent_td_75_Template, 2, 1, \"td\", 17);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(76, AccommodationDetailsComponent_tr_76_Template, 1, 0, \"tr\", 23);\n        i0.ɵɵtemplate(77, AccommodationDetailsComponent_tr_77_Template, 1, 0, \"tr\", 24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(78, \"mat-paginator\", 25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(79, \"app-map\");\n        i0.ɵɵtemplate(80, AccommodationDetailsComponent_app_reservation_80_Template, 1, 0, \"app-reservation\", 26);\n      }\n      if (rf & 2) {\n        const _r3 = i0.ɵɵreference(8);\n        let tmp_1_0;\n        let tmp_2_0;\n        let tmp_9_0;\n        let tmp_10_0;\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" \", ctx.accommodation == null ? null : ctx.accommodation.name, \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.role === \"GUEST\" && ctx.isInGuestFavourites((tmp_1_0 = ctx.accommodation == null ? null : ctx.accommodation.id) !== null && tmp_1_0 !== undefined ? tmp_1_0 : 0));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.role === \"GUEST\" && !ctx.isInGuestFavourites((tmp_2_0 = ctx.accommodation == null ? null : ctx.accommodation.id) !== null && tmp_2_0 !== undefined ? tmp_2_0 : 0));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.accommodation && ctx.accommodation.images && ctx.accommodation.images.length > 0)(\"ngIfElse\", _r3);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\" \", ctx.accommodation == null ? null : ctx.accommodation.description, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate3(\" \", ctx.accommodation == null ? null : ctx.accommodation.location == null ? null : ctx.accommodation.location.country, \", \", ctx.accommodation == null ? null : ctx.accommodation.location == null ? null : ctx.accommodation.location.city, \", \", ctx.accommodation == null ? null : ctx.accommodation.location == null ? null : ctx.accommodation.location.address, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate2(\" \", ctx.accommodation == null ? null : ctx.accommodation.minGuests, \" - \", ctx.accommodation == null ? null : ctx.accommodation.maxGuests, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.accommodation == null ? null : ctx.accommodation.status, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(30, 23, (tmp_9_0 = ctx.averageGradeAccommodation) !== null && tmp_9_0 !== undefined ? tmp_9_0 : 0, \"1.2-2\"));\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(35, 26, (tmp_10_0 = ctx.averageGradeOwner) !== null && tmp_10_0 !== undefined ? tmp_10_0 : 0, \"1.2-2\"));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.accommodation == null ? null : ctx.accommodation.assets);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.accommodation && (ctx.accommodation == null ? null : ctx.accommodation.images) && ctx.accommodation.images.length > 1);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngForOf\", ctx.accommodationReviews);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.ownerReviews);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(16);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"pageSizeOptions\", i0.ɵɵpureFunction0(29, _c0));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.role == \"GUEST\");\n      }\n    },\n    dependencies: [MatChipsModule, MatPaginatorModule, i7.MatPaginator, MatIconModule, i8.MatIcon, MatTableModule, i9.MatTable, i9.MatHeaderCellDef, i9.MatHeaderRowDef, i9.MatColumnDef, i9.MatCellDef, i9.MatRowDef, i9.MatHeaderCell, i9.MatCell, i9.MatHeaderRow, i9.MatRow, MatInputModule, MatFormFieldModule, MatButtonModule, MatListModule, CommonModule, i10.NgForOf, i10.NgIf, i10.DecimalPipe, i10.DatePipe, LayoutModule, i11.MapComponent, ReservationComponent],\n    styles: [\".details-container[_ngcontent-%COMP%] {\\n    max-width: 100%;\\n    margin: auto;\\n    padding: 25px;\\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\\n    background-color: #fff;\\n    display: flex;\\n  }\\n  .favourites-button[_ngcontent-%COMP%] {\\n    margin-left: 10px;\\n  }\\n  .heading[_ngcontent-%COMP%]{\\n    margin-right: 20px;\\n    flex:1;\\n  }\\n  .content[_ngcontent-%COMP%] {\\n    margin-top: 50px;\\n    flex: 2;\\n  }\\n  img[_ngcontent-%COMP%] {\\n    width: 600px;\\n    height: auto;\\n    margin-bottom: 15px;\\n  }\\n  .custom-chip[_ngcontent-%COMP%] {\\n    display: inline-block;\\n    padding: 8px 12px;\\n    margin: 4px;\\n    background-color: #e0e0e0;\\n    border-radius: 4px;\\n    font-size: 14px;\\n    color: #333;\\n  }\\n  \\n  h2[_ngcontent-%COMP%] {\\n    color: #333;\\n    font-size: 30px;\\n  }\\n  \\n  p[_ngcontent-%COMP%] {\\n    margin-bottom: 15px;\\n    font-size: 20px;\\n  }\\n  \\n  button[_ngcontent-%COMP%] {\\n    background-color: #007bff;\\n    color: #fff;\\n    padding: 8px 16px;\\n    border: none;\\n    border-radius: 4px;\\n    cursor: pointer;\\n    transition: background-color 0.3s ease;\\n  }\\n  \\n  button[_ngcontent-%COMP%]:hover {\\n    background-color: #0056b3;\\n  }\\n\\n  .image-container[_ngcontent-%COMP%] {\\n    display: flex;\\n    flex-wrap: nowrap; \\n\\n    overflow-x: auto; \\n\\n    margin-top: 15px;\\n  }\\n  \\n  .image-thumbnail[_ngcontent-%COMP%] {\\n    width: 200px; \\n\\n    height: 200px; \\n\\n    background-size: cover;\\n    background-position: center;\\n    margin-right: 10px; \\n\\n    border: 1px solid #ddd; \\n\\n    cursor: pointer;\\n    transition: border-color 0.3s ease;\\n  }\\n  \\n  .image-thumbnail[_ngcontent-%COMP%]:hover {\\n    border-color: #007bff; \\n\\n  }\\n\\n  .review[_ngcontent-%COMP%] {\\n    border: 1px solid #ddd;\\n    border-radius: 8px;\\n    padding: 10px;\\n    margin-bottom: 10px;\\n  }\\n  \\n  .review[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n    margin: 5px 0;\\n  }\\n  \\n  .review[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\\n    padding: 20px;\\n    font-weight: bold;\\n    margin-right: 5px;\\n  }\\n  .mat-elevation-z8[_ngcontent-%COMP%]{\\n    margin:auto;\\n    text-align:center;\\n    width: 80%;\\n    margin-top: 2%;\\n    padding:1%;\\n    box-shadow: none;\\n}\\n  .data-container[_ngcontent-%COMP%] {\\n    max-width: 80%;\\n    margin: 20px auto;\\n    padding: 20px;\\n    border: 1px solid #ccc;\\n    border-radius: 8px;\\n  }\\n\\n  .date-picker-container[_ngcontent-%COMP%] {\\n    text-align: center;\\n    width: 90%;\\n    margin: 0 auto;  \\n    display: flex;\\n    justify-content: space-between;\\n    align-items: flex-end;\\n    gap: 1%; \\n    margin-bottom: 2%;\\n  }\\n\\n  \\n  \\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYWNjb21tb2RhdGlvbi9hY2NvbW1vZGF0aW9uLWRldGFpbHMvYWNjb21tb2RhdGlvbi1kZXRhaWxzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxlQUFlO0lBQ2YsWUFBWTtJQUNaLGFBQWE7SUFDYix3Q0FBd0M7SUFDeEMsc0JBQXNCO0lBQ3RCLGFBQWE7RUFDZjtFQUNBO0lBQ0UsaUJBQWlCO0VBQ25CO0VBQ0E7SUFDRSxrQkFBa0I7SUFDbEIsTUFBTTtFQUNSO0VBQ0E7SUFDRSxnQkFBZ0I7SUFDaEIsT0FBTztFQUNUO0VBQ0E7SUFDRSxZQUFZO0lBQ1osWUFBWTtJQUNaLG1CQUFtQjtFQUNyQjtFQUNBO0lBQ0UscUJBQXFCO0lBQ3JCLGlCQUFpQjtJQUNqQixXQUFXO0lBQ1gseUJBQXlCO0lBQ3pCLGtCQUFrQjtJQUNsQixlQUFlO0lBQ2YsV0FBVztFQUNiOztFQUVBO0lBQ0UsV0FBVztJQUNYLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxtQkFBbUI7SUFDbkIsZUFBZTtFQUNqQjs7RUFFQTtJQUNFLHlCQUF5QjtJQUN6QixXQUFXO0lBQ1gsaUJBQWlCO0lBQ2pCLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIsZUFBZTtJQUNmLHNDQUFzQztFQUN4Qzs7RUFFQTtJQUNFLHlCQUF5QjtFQUMzQjs7RUFFQTtJQUNFLGFBQWE7SUFDYixpQkFBaUIsRUFBRSx1Q0FBdUM7SUFDMUQsZ0JBQWdCLEVBQUUseUNBQXlDO0lBQzNELGdCQUFnQjtFQUNsQjs7RUFFQTtJQUNFLFlBQVksRUFBRSxpREFBaUQ7SUFDL0QsYUFBYSxFQUFFLGtEQUFrRDtJQUNqRSxzQkFBc0I7SUFDdEIsMkJBQTJCO0lBQzNCLGtCQUFrQixFQUFFLG1EQUFtRDtJQUN2RSxzQkFBc0IsRUFBRSx1Q0FBdUM7SUFDL0QsZUFBZTtJQUNmLGtDQUFrQztFQUNwQzs7RUFFQTtJQUNFLHFCQUFxQixFQUFFLG9DQUFvQztFQUM3RDs7RUFFQTtJQUNFLHNCQUFzQjtJQUN0QixrQkFBa0I7SUFDbEIsYUFBYTtJQUNiLG1CQUFtQjtFQUNyQjs7RUFFQTtJQUNFLGFBQWE7RUFDZjs7RUFFQTtJQUNFLGFBQWE7SUFDYixpQkFBaUI7SUFDakIsaUJBQWlCO0VBQ25CO0VBQ0E7SUFDRSxXQUFXO0lBQ1gsaUJBQWlCO0lBQ2pCLFVBQVU7SUFDVixjQUFjO0lBQ2QsVUFBVTtJQUNWLGdCQUFnQjtBQUNwQjtFQUNFO0lBQ0UsY0FBYztJQUNkLGlCQUFpQjtJQUNqQixhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLGtCQUFrQjtFQUNwQjs7RUFFQTtJQUNFLGtCQUFrQjtJQUNsQixVQUFVO0lBQ1YsY0FBYztJQUNkLGFBQWE7SUFDYiw4QkFBOEI7SUFDOUIscUJBQXFCO0lBQ3JCLE9BQU87SUFDUCxpQkFBaUI7RUFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyIuZGV0YWlscy1jb250YWluZXIge1xyXG4gICAgbWF4LXdpZHRoOiAxMDAlO1xyXG4gICAgbWFyZ2luOiBhdXRvO1xyXG4gICAgcGFkZGluZzogMjVweDtcclxuICAgIGJveC1zaGFkb3c6IDAgNHB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICB9XHJcbiAgLmZhdm91cml0ZXMtYnV0dG9uIHtcclxuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xyXG4gIH1cclxuICAuaGVhZGluZ3tcclxuICAgIG1hcmdpbi1yaWdodDogMjBweDtcclxuICAgIGZsZXg6MTtcclxuICB9XHJcbiAgLmNvbnRlbnQge1xyXG4gICAgbWFyZ2luLXRvcDogNTBweDtcclxuICAgIGZsZXg6IDI7XHJcbiAgfVxyXG4gIGltZyB7XHJcbiAgICB3aWR0aDogNjAwcHg7XHJcbiAgICBoZWlnaHQ6IGF1dG87XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG4gIH1cclxuICAuY3VzdG9tLWNoaXAge1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgcGFkZGluZzogOHB4IDEycHg7XHJcbiAgICBtYXJnaW46IDRweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGUwZTA7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICBjb2xvcjogIzMzMztcclxuICB9XHJcbiAgXHJcbiAgaDIge1xyXG4gICAgY29sb3I6ICMzMzM7XHJcbiAgICBmb250LXNpemU6IDMwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIHAge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxuICAgIGZvbnQtc2l6ZTogMjBweDtcclxuICB9XHJcbiAgXHJcbiAgYnV0dG9uIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7XHJcbiAgICBjb2xvcjogI2ZmZjtcclxuICAgIHBhZGRpbmc6IDhweCAxNnB4O1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2U7XHJcbiAgfVxyXG4gIFxyXG4gIGJ1dHRvbjpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA1NmIzO1xyXG4gIH1cclxuXHJcbiAgLmltYWdlLWNvbnRhaW5lciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC13cmFwOiBub3dyYXA7IC8qIEVuc3VyZSBpbWFnZXMgc3RheSBpbiBhIHNpbmdsZSByb3cgKi9cclxuICAgIG92ZXJmbG93LXg6IGF1dG87IC8qIEFsbG93IGhvcml6b250YWwgc2Nyb2xsaW5nIGlmIG5lZWRlZCAqL1xyXG4gICAgbWFyZ2luLXRvcDogMTVweDtcclxuICB9XHJcbiAgXHJcbiAgLmltYWdlLXRodW1ibmFpbCB7XHJcbiAgICB3aWR0aDogMjAwcHg7IC8qIEFkanVzdCB0aGUgd2lkdGggb2YgZWFjaCB0aHVtYm5haWwgYXMgbmVlZGVkICovXHJcbiAgICBoZWlnaHQ6IDIwMHB4OyAvKiBBZGp1c3QgdGhlIGhlaWdodCBvZiBlYWNoIHRodW1ibmFpbCBhcyBuZWVkZWQgKi9cclxuICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XHJcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7IC8qIEFkanVzdCB0aGUgbWFyZ2luIGJldHdlZW4gdGh1bWJuYWlscyBhcyBuZWVkZWQgKi9cclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IC8qIEFkZCBhIGJvcmRlciBmb3IgYmV0dGVyIHZpc2liaWxpdHkgKi9cclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIHRyYW5zaXRpb246IGJvcmRlci1jb2xvciAwLjNzIGVhc2U7XHJcbiAgfVxyXG4gIFxyXG4gIC5pbWFnZS10aHVtYm5haWw6aG92ZXIge1xyXG4gICAgYm9yZGVyLWNvbG9yOiAjMDA3YmZmOyAvKiBIaWdobGlnaHQgYm9yZGVyIGNvbG9yIG9uIGhvdmVyICovXHJcbiAgfVxyXG5cclxuICAucmV2aWV3IHtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XHJcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICB9XHJcbiAgXHJcbiAgLnJldmlldyBwIHtcclxuICAgIG1hcmdpbjogNXB4IDA7XHJcbiAgfVxyXG4gIFxyXG4gIC5yZXZpZXcgc3Ryb25nIHtcclxuICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIG1hcmdpbi1yaWdodDogNXB4O1xyXG4gIH1cclxuICAubWF0LWVsZXZhdGlvbi16OHtcclxuICAgIG1hcmdpbjphdXRvO1xyXG4gICAgdGV4dC1hbGlnbjpjZW50ZXI7XHJcbiAgICB3aWR0aDogODAlO1xyXG4gICAgbWFyZ2luLXRvcDogMiU7XHJcbiAgICBwYWRkaW5nOjElO1xyXG4gICAgYm94LXNoYWRvdzogbm9uZTtcclxufVxyXG4gIC5kYXRhLWNvbnRhaW5lciB7XHJcbiAgICBtYXgtd2lkdGg6IDgwJTtcclxuICAgIG1hcmdpbjogMjBweCBhdXRvO1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgfVxyXG5cclxuICAuZGF0ZS1waWNrZXItY29udGFpbmVyIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIHdpZHRoOiA5MCU7XHJcbiAgICBtYXJnaW46IDAgYXV0bzsgIFxyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcclxuICAgIGdhcDogMSU7IFxyXG4gICAgbWFyZ2luLWJvdHRvbTogMiU7XHJcbiAgfVxyXG5cclxuICBcclxuICBcclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["MatChipsModule","MatIconModule","MatInputModule","MatFormFieldModule","MatButtonModule","MatListModule","CommonModule","LayoutModule","ReservationComponent","RoleEnum","MatTableDataSource","MatTableModule","MatSort","MatPaginator","MatPaginatorModule","JwtHelperService","i0","ɵɵelementStart","ɵɵlistener","AccommodationDetailsComponent_button_4_Template_button_click_0_listener","ɵɵrestoreView","_r23","ctx_r22","ɵɵnextContext","ɵɵresetView","removeFromFavourites","ɵɵtext","ɵɵelementEnd","AccommodationDetailsComponent_button_5_Template_button_click_0_listener","_r25","ctx_r24","addToFavourites","ɵɵelement","ɵɵadvance","ɵɵpropertyInterpolate1","ctx_r2","accommodation","name","ɵɵproperty","images","ɵɵsanitizeUrl","ɵɵtextInterpolate","asset_r26","ɵɵstyleProp","image_r28","ɵɵattribute","ctx_r27","i_r29","ɵɵtemplate","AccommodationDetailsComponent_div_44_div_1_Template","ctx_r6","slice","AccommodationDetailsComponent_div_52_button_23_Template_button_click_0_listener","_r34","review_r30","$implicit","ctx_r32","deleteReview","id","AccommodationDetailsComponent_div_52_button_23_Template","ɵɵtextInterpolate1","userId","type","comment","grade","ɵɵpipeBind2","dateTime","ctx_r7","loggedInUserId","AccommodationDetailsComponent_div_56_button_23_Template_button_click_0_listener","_r39","review_r35","ctx_r37","AccommodationDetailsComponent_div_56_button_23_Template","ctx_r8","element_r40","element_r41","timeSlot","startDate","element_r42","endDate","element_r43","price","element_r44","AccommodationDetailsComponent","constructor","route","router","accommodationService","authService","reviewService","cdr","userService","snackBar","averageGradeOwner","averageGradeAccommodation","accessToken","localStorage","getItem","helper","decodedToken","decodeToken","availableDates","dataSource","displayedColumns","ngAfterViewInit","detectChanges","openSnackBar","message","open","duration","ngOnInit","sub","userState","subscribe","result","role","console","log","getUserById","foundUser","wholeUser","UNAUTHENTICATED","paramMap","params","accommodationId","get","calculateAverageGradeAccommodation","getById","foundAccommodation","calculateAverageGradeOwner","ownerId","prices","paginator","sort","fetchAccommodationReviews","fetchOwnerReviews","error","isInGuestFavourites","guestFavourites","favouriteAccommodations","split","accommodationIdString","toString","includes","addFavourite","username","removeFavourite","findByAccommodationId","reviews","approvedReviews","review","status","push","accommodationReviews","findByOwnerId","ownerReviews","goBack","navigate","accommodationImages","isDateAvailable","date","some","availableDate","isSameDate","date1","date2","getFullYear","getMonth","getDate","undefined","delete","averageGrade","sum","numberOfReviews","_","ɵɵdirectiveInject","i1","ActivatedRoute","Router","i2","AccommodationService","i3","AuthService","i4","ReviewService","ChangeDetectorRef","i5","UserService","i6","MatSnackBar","_2","selectors","viewQuery","AccommodationDetailsComponent_Query","rf","ctx","AccommodationDetailsComponent_button_4_Template","AccommodationDetailsComponent_button_5_Template","AccommodationDetailsComponent_div_6_Template","AccommodationDetailsComponent_ng_template_7_Template","ɵɵtemplateRefExtractor","AccommodationDetailsComponent_div_40_Template","AccommodationDetailsComponent_div_44_Template","AccommodationDetailsComponent_Template_button_click_45_listener","AccommodationDetailsComponent_div_52_Template","AccommodationDetailsComponent_div_56_Template","ɵɵelementContainerStart","AccommodationDetailsComponent_th_62_Template","AccommodationDetailsComponent_td_63_Template","ɵɵelementContainerEnd","AccommodationDetailsComponent_th_65_Template","AccommodationDetailsComponent_td_66_Template","AccommodationDetailsComponent_th_68_Template","AccommodationDetailsComponent_td_69_Template","AccommodationDetailsComponent_th_71_Template","AccommodationDetailsComponent_td_72_Template","AccommodationDetailsComponent_th_74_Template","AccommodationDetailsComponent_td_75_Template","AccommodationDetailsComponent_tr_76_Template","AccommodationDetailsComponent_tr_77_Template","AccommodationDetailsComponent_app_reservation_80_Template","tmp_1_0","tmp_2_0","length","_r3","description","ɵɵtextInterpolate3","location","country","city","address","ɵɵtextInterpolate2","minGuests","maxGuests","tmp_9_0","tmp_10_0","assets","ɵɵpureFunction0","_c0","i7","i8","MatIcon","i9","MatTable","MatHeaderCellDef","MatHeaderRowDef","MatColumnDef","MatCellDef","MatRowDef","MatHeaderCell","MatCell","MatHeaderRow","MatRow","i10","NgForOf","NgIf","DecimalPipe","DatePipe","i11","MapComponent","styles"],"sources":["C:\\Users\\USER\\Desktop\\Front-end\\ProjectApp\\src\\app\\accommodation\\accommodation-details\\accommodation-details.component.ts","C:\\Users\\USER\\Desktop\\Front-end\\ProjectApp\\src\\app\\accommodation\\accommodation-details\\accommodation-details.component.html"],"sourcesContent":["import { AfterViewInit, ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Accommodation } from '../accommodation/model/accommodation.model';\r\nimport { ActivatedRoute, ParamMap, Route, Router } from '@angular/router';\r\nimport { AccommodationService } from '../accommodation.service';\r\nimport {MatChipsModule} from '@angular/material/chips';\r\nimport {MatIconModule} from '@angular/material/icon';\r\nimport {MatInputModule} from '@angular/material/input';\r\nimport {MatFormFieldModule} from '@angular/material/form-field';\r\nimport {MatButtonModule} from '@angular/material/button';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { CommonModule } from '@angular/common';\r\nimport { LayoutModule } from \"../../layout/layout.module\";\r\nimport { ReservationComponent } from \"../../reservation/reservation.component\";\r\nimport { UserGetDTO } from 'src/app/models/userGetDTO.model';\r\nimport { RoleEnum } from 'src/app/models/userEnums.model';\r\nimport { AuthService } from 'src/app/auth/auth.service';\r\nimport { MatTableDataSource, MatTableModule } from '@angular/material/table';\r\nimport { PriceCard } from '../accommodation/model/priceCard.model';\r\nimport { MatSort } from '@angular/material/sort';\r\nimport { MatPaginator, MatPaginatorModule } from '@angular/material/paginator';\r\nimport { Review } from '../accommodation/model/review.model';\r\nimport { ReviewService } from 'src/app/rating/review.service';\r\nimport { JwtHelperService } from '@auth0/angular-jwt';\r\nimport { ReviewStatusEnum } from 'src/app/models/enums/reviewStatusEnum';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { UserService } from 'src/app/user.service';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Observable, map } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'app-accommodation-details',\r\n    templateUrl: './accommodation-details.component.html',\r\n    styleUrls: ['./accommodation-details.component.css'],\r\n    standalone: true,\r\n    imports: [MatChipsModule,MatPaginatorModule, MatIconModule,MatTableModule, MatInputModule, MatFormFieldModule, MatButtonModule, MatListModule, CommonModule, LayoutModule, ReservationComponent]\r\n})\r\nexport class AccommodationDetailsComponent implements OnInit,AfterViewInit{\r\n  accommodation: Accommodation | undefined;\r\n  averageGradeOwner: number | undefined=0.00;\r\n  averageGradeAccommodation: number | undefined=0.00;\r\n  accessToken: any = localStorage.getItem('user');\r\n  helper = new JwtHelperService();\r\n  decodedToken = this.helper.decodeToken(this.accessToken);\r\n  loggedInUserId:string;\r\n  ownerId:string;\r\n\r\n  \r\n  availableDates: Date[] = [];\r\n  user:UserGetDTO;\r\n  role: RoleEnum ;\r\n  wholeUser:User;\r\n  dataSource = new MatTableDataSource<PriceCard>([]);\r\n  displayedColumns: string[] = ['Id', 'Start Date', 'End Date', 'Price','Type'];\r\n  accommodationReviews:Review[];\r\n  ownerReviews:Review[];\r\n  @ViewChild(MatPaginator) paginator: MatPaginator;\r\n  @ViewChild(MatSort) sort: MatSort;\r\n  constructor(\r\n    private route:ActivatedRoute,\r\n    private router:Router,\r\n    private accommodationService:AccommodationService,\r\n    private authService: AuthService,\r\n    private reviewService:ReviewService,\r\n    private cdr: ChangeDetectorRef,\r\n    private userService:UserService,\r\n    private snackBar:MatSnackBar\r\n  ){}\r\n  ngAfterViewInit(): void {\r\n    this.cdr.detectChanges();\r\n  }\r\n  openSnackBar(message: string) {\r\n    this.snackBar.open(message, 'OK', {\r\n      duration: 4000,\r\n    });\r\n  }\r\n  ngOnInit() {\r\n\r\n   \r\n    this.averageGradeAccommodation=0.00;\r\n    this.averageGradeOwner=0.00;\r\n\r\n    if(this.decodedToken){\r\n      this.loggedInUserId=this.decodedToken.sub;\r\n      this.authService.userState.subscribe((result) => {\r\n        if(result != null){\r\n          this.role = result.role;\r\n          console.log(this.loggedInUserId)\r\n      this.userService.getUserById(this.loggedInUserId).subscribe(\r\n        (foundUser) =>{\r\n          if(foundUser){\r\n            this.wholeUser=foundUser;\r\n          }\r\n        }\r\n      )\r\n        }else{\r\n         this.role=RoleEnum.UNAUTHENTICATED;\r\n        }\r\n       this.cdr.detectChanges();\r\n      })\r\n    }\r\n    \r\n    \r\n    this.route.paramMap.subscribe((params: ParamMap) => {\r\n      const accommodationId = +params.get('id')!;\r\n      this.averageGradeAccommodation=this.calculateAverageGradeAccommodation(accommodationId);\r\n      console.log(this.averageGradeAccommodation)\r\n      this.accommodationService.getById(accommodationId).subscribe(\r\n        (foundAccommodation) => {\r\n          if (foundAccommodation) {\r\n            this.accommodation = foundAccommodation;\r\n            this.averageGradeOwner=this.calculateAverageGradeOwner(foundAccommodation.ownerId);\r\n            console.log(this.accommodation);\r\n            \r\n            this.dataSource=new MatTableDataSource<PriceCard>(this.accommodation.prices);\r\n            this.dataSource.paginator=this.paginator;\r\n            this.dataSource.sort=this.sort;\r\n\r\n            \r\n            this.fetchAccommodationReviews(accommodationId);\r\n            this.fetchOwnerReviews(this.accommodation.ownerId);\r\n          } else {\r\n            console.error(`Accommodation with ID ${accommodationId} not found`);\r\n          }\r\n        },\r\n        (error) => {\r\n          console.error('Error fetching accommodation:', error);\r\n        }\r\n      );\r\n    });\r\n  }\r\n  isInGuestFavourites(accommodationId:number):boolean{\r\n    const guestFavourites=this.wholeUser.favouriteAccommodations.split(\",\")\r\n    const accommodationIdString = accommodationId.toString();\r\n    return guestFavourites.includes(accommodationIdString);\r\n  }\r\n  addToFavourites() {\r\n    if(this.accommodation?.id)\r\n    this.userService.addFavourite(this.wholeUser.username, this.accommodation.id).subscribe(\r\n        () => {\r\n            this.openSnackBar(\"Added to favourites\")\r\n            this.ngOnInit()\r\n        },\r\n        (error) => {\r\n            console.error('Failed to add to favourites', error);\r\n        }\r\n    );\r\n  }\r\n\r\n  removeFromFavourites() {\r\n    if(this.accommodation?.id)\r\n    this.userService.removeFavourite(this.wholeUser.username, this.accommodation.id).subscribe(\r\n        () => {\r\n            this.openSnackBar(\"Removed from favourites\");\r\n            this.ngOnInit()\r\n        },\r\n        (error) => {\r\n            console.error('Failed to remove from favourites', error);\r\n        }\r\n    );\r\n  }\r\n  fetchAccommodationReviews(accommodationId: number) {\r\n    this.reviewService.findByAccommodationId(accommodationId).subscribe(\r\n      (reviews) => {\r\n        const approvedReviews = [];\r\n      \r\n        for (const review of reviews) {\r\n          if (review.status.toString()==\"APPROVED\") {\r\n            approvedReviews.push(review);\r\n          //  this.calculateAverageGradeAccommodation(review.accommodationId)\r\n          }\r\n        }\r\n        \r\n        this.accommodationReviews = approvedReviews;\r\n        console.log(approvedReviews)\r\n        console.log('Accommodation reviews:', this.accommodationReviews);\r\n      },\r\n      (error) => {\r\n        console.error('Error fetching reviews:', error);\r\n      }\r\n    );\r\n  }\r\n  fetchOwnerReviews(ownerId: string) {\r\n    this.reviewService.findByOwnerId(ownerId).subscribe(\r\n      (reviews) => {\r\n        const approvedReviews = [];\r\n        for (const review of reviews) {\r\n   \r\n          if (review.status.toString()==\"APPROVED\") {\r\n            approvedReviews.push(review);\r\n          }\r\n        }\r\n        \r\n        this.ownerReviews = approvedReviews;\r\n        console.log('Owner reviews:', this.ownerReviews);\r\n        console.log(approvedReviews)\r\n      },\r\n      (error) => {\r\n        console.error('Error fetching reviews:', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/home']);\r\n  }\r\n  // Add a getter to explicitly check for non-null images\r\n  get accommodationImages(): string[] | undefined {\r\n    return this.accommodation?.images;\r\n  }\r\n\r\n  isDateAvailable(date: Date): boolean {\r\n    return this.availableDates.some((availableDate) => this.isSameDate(date, availableDate));\r\n  }\r\n\r\n  private isSameDate(date1: Date, date2: Date): boolean {\r\n    return date1.getFullYear() === date2.getFullYear() &&\r\n      date1.getMonth() === date2.getMonth() &&\r\n      date1.getDate() === date2.getDate();\r\n  }\r\n   deleteReview(id:number|undefined):void{\r\n   if(id!=undefined){\r\n    this.reviewService.delete(id).subscribe(\r\n      () => {\r\n        console.log(`Review with ID ${id} deleted successfully`);\r\n        \r\n        // Optionally, you can fetch the updated reviews after deletion\r\n        const accommodationId = this.accommodation?.id || 0;\r\n        this.fetchAccommodationReviews(accommodationId);\r\n      },\r\n      (error) => {\r\n        console.error(`Error deleting review with ID ${id}:`, error);\r\n      }\r\n    );\r\n   }\r\n    \r\n  }\r\n\r\n  calculateAverageGradeAccommodation(accommodationId: number): number {\r\n    let averageGrade: number = 0; // ili neka podrazumevana vrednost\r\n    let sum:number=0;\r\n    this.averageGradeAccommodation=0.00;\r\n\r\n    this.reviewService.findByAccommodationId(accommodationId).subscribe(\r\n      (reviews: Review[]) => {\r\n        // Handle the list of reviews here\r\n        let numberOfReviews: number = 0;\r\n        for (const review of reviews) {\r\n          if(review.status.toString()===\"APPROVED\"){\r\n            sum=sum+review.grade;\r\n            numberOfReviews=numberOfReviews+1\r\n          }\r\n          // Do something with each review\r\n          \r\n       \r\n          // Add more properties or actions as needed\r\n        }\r\n        console.log(\"num: \", numberOfReviews)\r\n        averageGrade=sum / numberOfReviews\r\n        console.log(\"AVERAGE  GRADE : \",averageGrade)\r\n        if(numberOfReviews!=0){\r\n          this.averageGradeAccommodation=averageGrade;\r\n        }else{\r\n          this.averageGradeAccommodation=0.00;\r\n        }\r\n      \r\n        return averageGrade;\r\n        // Do further processing or manipulation if needed\r\n      },\r\n      (error: any) => {\r\n        console.error('Error retrieving reviews:', error);\r\n        // Handle the error as needed\r\n      }\r\n    );\r\n\r\n   return averageGrade;\r\n  \r\n    \r\n    //   this.reviewService.findAverageGradeByAccommodationId(accommodationId).subscribe(\r\n    //     (grade: number) => {\r\n    //       averageGrade = grade;\r\n    //     },\r\n    //     (error: any) => {\r\n    //       console.error('Greška pri dobijanju prosečne ocene smestaja:', error);\r\n    //     }\r\n    //   );\r\n      \r\n    \r\n    // return averageGrade;\r\n    // return this.reviewService.findAverageGradeByOwnerId(ownerId);\r\n  }\r\n\r\n \r\n  \r\n\r\n\r\n  calculateAverageGradeOwner(ownerId: string): number {\r\n\r\n    let averageGrade: number = 0; // ili neka podrazumevana vrednost\r\n    let sum:number=0;\r\n    this.averageGradeOwner=0.00;\r\n\r\n\r\n    this.reviewService.findByOwnerId(ownerId).subscribe(\r\n      (reviews: Review[]) => {\r\n        // Handle the list of reviews here\r\n       let numberOfReviews: number =0;\r\n        for (const review of reviews) {\r\n          if(review.status.toString()===\"APPROVED\"){\r\n            sum=sum+review.grade;\r\n            numberOfReviews=numberOfReviews+1\r\n          }\r\n          // Do something with each review\r\n         \r\n       \r\n          // Add more properties or actions as needed\r\n        }\r\n        console.log(\"num: \", numberOfReviews)\r\n        averageGrade=sum / numberOfReviews\r\n        console.log(\"AVERAGE  GRADE : \",averageGrade)\r\n       // this.averageGradeOwner=averageGrade;\r\n        if(numberOfReviews!=0){\r\n          this.averageGradeOwner=averageGrade;\r\n        }else{\r\n          this.averageGradeOwner=0.00;\r\n        }\r\n        return averageGrade;\r\n        // Do further processing or manipulation if needed\r\n      },\r\n      (error: any) => {\r\n        console.error('Error retrieving reviews:', error);\r\n        // Handle the error as needed\r\n      }\r\n    );\r\n\r\n   return averageGrade;\r\n  \r\n    \r\n    // return this.reviewService.findAverageGradeByOwnerId(ownerId);\r\n  }\r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\n\r\n}","<div class=\"details-container\">\r\n  <div class=\"heading\">\r\n    <h2>\r\n      {{ accommodation?.name }}\r\n      <button *ngIf=\"role === 'GUEST' && isInGuestFavourites(accommodation?.id ?? 0)\" class=\"favourites-button\" (click)=\"removeFromFavourites()\">\r\n          Remove from favourites\r\n      </button>\r\n      <button *ngIf=\"role === 'GUEST' && !isInGuestFavourites(accommodation?.id ?? 0)\" class=\"favourites-button\" (click)=\"addToFavourites()\">\r\n          Add to favourites\r\n      </button>\r\n  </h2>\r\n  <div *ngIf=\"accommodation && accommodation.images && accommodation.images.length > 0; else noImages\">\r\n    <img [src]=\"accommodation.images[0]\" alt=\"{{ accommodation?.name }} Image\">\r\n  </div>\r\n\r\n  <ng-template #noImages>\r\n    <!-- Show a default image if there are no images -->\r\n    <img src=\"../../../assets/images/accommodation1.jpg\" alt=\"Default Image\">\r\n  </ng-template>\r\n  </div>\r\n    \r\n    <div class=\"content\">\r\n      <p><strong>Description:</strong> {{ accommodation?.description }}</p>\r\n    <p><strong>Location:</strong> {{ accommodation?.location?.country }}, {{accommodation?.location?.city}}, {{accommodation?.location?.address}}</p>\r\n    <p><strong>Guests:</strong> {{ accommodation?.minGuests }} - {{ accommodation?.maxGuests }}</p>\r\n    <p><strong>Status:</strong> {{ accommodation?.status }}</p>\r\n    <p><strong>Accommodation average grade: </strong>{{averageGradeAccommodation ?? 0.00   | number: '1.2-2'}}</p>\r\n    <p><strong>Owners Average grade: </strong>{{averageGradeOwner ?? 0.00   | number: '1.2-2'}}</p>\r\n    <!--<p><strong>Rating:</strong> {{accommodation.rating}}</p>-->\r\n    <p><strong>Assets:</strong></p>\r\n    <div class=\"options-container\">\r\n      <div *ngFor=\"let asset of accommodation?.assets\" class=\"custom-chip\">{{ asset }}</div>\r\n    </div>\r\n\r\n  <p><strong>Additional Images:</strong></p>\r\n    <!-- Iterate over all images starting from index 1 -->\r\n    <div class=\"image-container\" *ngIf=\"accommodation && accommodation?.images && accommodation.images.length > 1\">\r\n      <div *ngFor=\"let image of accommodation.images.slice(1); let i = index\" class=\"image-thumbnail\" [style.backgroundImage]=\"'url(' + image + ')'\" [attr.alt]=\"accommodation?.name + ' Image ' + (i + 1)\"></div>\r\n    </div>\r\n\r\n    \r\n    \r\n    <button (click)=\"goBack()\" style=\"margin-top: 3%;margin-left: 80%;\"><mat-icon>arrow_back</mat-icon></button>\r\n    </div>\r\n    \r\n  </div>\r\n  <br>\r\n  <p style=\"padding-left:25px;\"><strong>Accommodation reviews:</strong></p>\r\n    <div *ngFor=\"let review of this.accommodationReviews\">\r\n      <div class=\"review\">\r\n        <p><strong>User ID:</strong> {{ review.userId }}</p>\r\n        <p><strong>Reviewing </strong> {{ review.type }}</p>\r\n        <p><strong>Comment:</strong> {{ review.comment }}</p>\r\n        <p><strong>Grade:</strong> {{ review.grade }}</p>\r\n        <p><strong>Date:</strong> {{ review.dateTime | date:'medium' }}</p>\r\n        <!-- <p><strong>Average grade: </strong>{{calculateAverageGradeAccommodation(review.accommodationId)}}</p> -->\r\n        <button class=\"dugme-delete\" *ngIf=\"review?.userId == loggedInUserId\" (click)=\"deleteReview(review.id)\" >Delete</button>\r\n      </div>\r\n    </div>\r\n\r\n    <p style=\"padding-left:25px;\"><strong>Owner reviews:</strong></p>\r\n    <div *ngFor=\"let review of this.ownerReviews\">\r\n      <div class=\"review\">\r\n        <p><strong>User ID:</strong> {{ review.userId }}</p>\r\n        <p><strong>Reviewing </strong> {{ review.type }}</p>\r\n        <p><strong>Comment:</strong> {{ review.comment }}</p>\r\n        <p><strong>Grade:</strong> {{ review.grade }}</p>\r\n        <p><strong>Date:</strong> {{ review.dateTime | date:'medium' }}</p>\r\n        <!-- <p><strong>Average grade:</strong>{{ calculateAverageGradeOwner(review.ownerId) }}</p> -->\r\n\r\n        <button class=\"dugme-delete\" *ngIf=\"review?.userId == loggedInUserId\" (click)=\"deleteReview(review.id)\" >Delete</button>\r\n      </div>\r\n    </div>\r\n    <div class=\"mat-elevation-z8\">\r\n      <h2 style=\"margin-left: 10px;\">Prices and availability intervals</h2>\r\n      <table mat-table [dataSource]=\"dataSource\" matSort>\r\n        \r\n      \r\n        <ng-container matColumnDef=\"Id\">\r\n          <th mat-header-cell *matHeaderCellDef mat-sort-header> Id </th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{element.id}} </td>\r\n        </ng-container>\r\n    \r\n        <ng-container matColumnDef=\"Start Date\">\r\n          <th mat-header-cell *matHeaderCellDef> Start Date</th>\r\n          <td mat-cell *matCellDef=\"let element\"> \r\n            {{element.timeSlot.startDate | date: 'shortDate'}}\r\n          </td>\r\n        </ng-container>\r\n    \r\n        <ng-container matColumnDef=\"End Date\">\r\n          <th mat-header-cell *matHeaderCellDef> End Date </th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{element.timeSlot.endDate | date: 'shortDate'}}</td>\r\n        </ng-container>\r\n    \r\n        <ng-container matColumnDef=\"Price\">\r\n          <th mat-header-cell *matHeaderCellDef mat-sort-header> Price </th>\r\n          <td mat-cell *matCellDef=\"let element\"> \r\n            {{element.price}}\r\n            </td>\r\n        </ng-container>\r\n        \r\n        <ng-container matColumnDef=\"Type\">\r\n          <th mat-header-cell *matHeaderCellDef mat-sort-header>Type </th>\r\n          <td mat-cell *matCellDef=\"let element\"> {{element.type}} </td>\r\n        </ng-container>\r\n      \r\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n      </table>\r\n\r\n      <mat-paginator [pageSizeOptions]=\"[5, 10, 20]\"\r\n                     showFirstLastButtons\r\n                     aria-label=\"Select page of periodic elements\">\r\n      </mat-paginator>\r\n    </div>\r\n    \r\n  <app-map></app-map>\r\n  <app-reservation *ngIf=\"role == 'GUEST'\"></app-reservation>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}